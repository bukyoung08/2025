import streamlit as st
import random

# -------------------------------
# Streamlit 제목
# -------------------------------
st.set_page_config(page_title="분리배출 도우미", layout="centered")
st.title("♻️ 분리배출 도우미")
st.write("분리배출 헷갈릴 땐, 저한테 물어보세요 ✨")

# -------------------------------
# 분리배출 데이터베이스 (카테고리 + 설명)
# -------------------------------
disposal_info = {
    "플라스틱 컵": {"카테고리": "플라스틱류", "설명": "내용물을 비우고, 빨대·컵뚜껑은 분리하여 플라스틱류로 배출하세요."},
    "종이컵": {"카테고리": "종이류 / 일반쓰레기", "설명": "겉면 코팅 때문에 종이류가 아닌 일반쓰레기로 버리세요."},
    "일회용 빨대": {"카테고리": "플라스틱류 / 일반쓰레기", "설명": "재활용 불가! 일반쓰레기로 버리세요."},
    "우유팩": {"카테고리": "종이팩류", "설명": "내용물을 헹군 뒤 종이팩 전용 수거함이나 종이류로 배출하세요."},
    "페트병": {"카테고리": "플라스틱류", "설명": "내용물을 비우고 라벨 제거 후 압착하여 플라스틱류로 배출하세요."},
    "건전지": {"카테고리": "특수 폐기물", "설명": "전용 수거함에 배출하세요. (편의점, 대형마트 등)"},
    "형광등": {"카테고리": "특수 폐기물", "설명": "깨지지 않게 전용 수거함에 배출하세요."},
    "스티로폼": {"카테고리": "혼합재질", "설명": "깨끗한 것은 재활용 가능, 음식물·이물질이 묻으면 일반쓰레기."},
    "택배 상자": {"카테고리": "종이류", "설명": "테이프·스티커 제거 후 종이류로 배출하세요."},
    "아이스팩": {"카테고리": "혼합재질", "설명": "깨끗하면 재사용 권장, 젤은 일반쓰레기 + 외피는 비닐류"},
    "옷": {"카테고리": "재사용/헌옷수거함", "설명": "깨끗하면 헌옷수거함, 심하게 훼손되면 일반쓰레기."},
    "우산": {"카테고리": "혼합재질", "설명": "금속과 천을 분리 후 각각 재활용/일반쓰레기로 배출하세요."},
    "칫솔": {"카테고리": "일반쓰레기", "설명": "재활용 불가 → 일반쓰레기."},
    "치약 튜브": {"카테고리": "일반쓰레기", "설명": "재활용 불가 → 일반쓰레기."},
    "종이 영수증": {"카테고리": "일반쓰레기", "설명": "코팅된 경우가 많아 종이류 불가 → 일반쓰레기."},
    "라면봉지/스낵봉지": {"카테고리": "일반쓰레기", "설명": "재활용 불가, 일반쓰레기로 버리세요."},
    "비닐봉지": {"카테고리": "비닐류 / 일반쓰레기", "설명": "깨끗하면 비닐류 가능, 오염되면 일반쓰레기."},
    "유리병": {"카테고리": "유리류", "설명": "깨끗이 씻어서 배출, 깨진 경우 신문지에 싸서 일반쓰레기."},
    "캔": {"카테고리": "캔류", "설명": "내용물을 비우고 이물질 제거 후 캔류로 배출하세요."},
    "휴지/키친타월": {"카테고리": "일반쓰레기", "설명": "재활용 불가 → 일반쓰레기."},
    "샴푸통": {"카테고리": "플라스틱류", "설명": "세척 후 플라스틱류로 배출"},
    "화장품 용기": {"카테고리": "혼합재질", "설명": "재질 분리 후 각각 배출. 혼합재질이면 일반쓰레기"},
    "볼펜": {"카테고리": "일반쓰레기", "설명": "분리 어려움 → 일반쓰레기"},
    "휴대폰": {"카테고리": "특수 폐기물", "설명": "주민센터·통신사 매장 전용 수거함 이용"}
}

# -------------------------------
# 친환경 꿀팁
# -------------------------------
eco_tips = [
    "텀블러를 사용하면 1년에 종이컵 약 500개를 줄일 수 있어요!",
    "분리배출 전 ‘깨끗이, 비우고, 분리하고’ 3단계 꼭 기억하세요.",
    "재활용품은 라벨 제거 후 배출하는 게 좋아요.",
    "장바구니를 챙기면 비닐봉지 사용을 크게 줄일 수 있어요.",
    "플라스틱 용기는 내용물 헹군 뒤 압착해서 버리면 효율이 높아져요.",
    "배달 용기 중 종이 재질은 대부분 일반쓰레기예요.",
    "재활용은 ‘분리배출’보다 ‘줄이는 것’이 더 효과적이에요!",
    "건전지는 꼭 수거함에! 환경오염의 주범이 될 수 있어요.",
    "남은 음식물은 음식물쓰레기로, 비닐봉지는 일반쓰레기로!",
    "다회용기 사용으로 일회용품 사용을 줄여보세요."
]

# 랜덤 친환경 꿀팁 출력
st.info("🌱 오늘의 친환경 꿀팁: " + random.choice(eco_tips))

# -------------------------------
# 검색창 + 선택박스
# -------------------------------
query_text = st.text_input("검색창에 품목을 입력하세요 (예: 플라스틱 컵, 건전지)")
query_select = st.selectbox("또는 목록에서 선택하세요:", [""] + list(disposal_info.keys()))

# 입력값 우선순위
query = query_text if query_text else query_select

# -------------------------------
# 결과 카드 스타일 출력
# -------------------------------
if query:
    result = disposal_info.get(query)
    if result:
        st.markdown(f"""
        <div style="background-color:#DFF6FF; padding:15px; border-radius:10px; margin-top:10px;">
            <h4>✅ {query} 분리배출 방법</h4>
            <p><strong>카테고리:</strong> {result['카테고리']}</p>
            <p><strong>방법:</strong> {result['설명']}</p>
        </div>
        """, unsafe_allow_html=True)
    else:
        st.error("❌ 등록되지 않은 품목이에요. 다른 이름으로 검색해보세요!")
